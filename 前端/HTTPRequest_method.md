HTTP协议

### 什么是HTTP协议
HTTP：超文本传送协议 (HTTP-Hypertext transfer protocol) ，定义了浏览器（即万维网客户进程）怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器。从层次的角度看，HTTP是面向（transaction-oriented)应用层协议，它是万维网上能够可靠地交换文件（包括文本、声音、图像等各种多媒体文件）的重要基础。

### 网络基础TCP/IP

**TCP/IP**是互联网相关的各类协议组的总称。

- 应用层

  FTP, DNS, HTTP协议属于该层

- 传输层

  TCP传输控制协议

  UDP用户数据报协议

- 网络层

  IP协议

  用来处理在网络上流动的数据包。数据包是网络传输的最小的数据单位。

- 链路层（又名网络接口层）

  用来处理连接网络的硬件部分。

![import1](D:\MyDocument\Development_study\development_note\前端\import1.png)



把数据信息包装起来的做法成为**封装**（encapsulate）

![import2](D:\MyDocument\Development_study\development_note\前端\import2.png)



**TCP三次握手策略**

TCP标识——SYN和ACK（synchronize和acknowledgement）

> 发送端首先发送一个带SYN标志的数据包给对方。
>
> 接收端收到后回传一个带有SYN/ACK标志的数据包以示传达确认信息。
>
> 最后发送端在回传一个带有ACK标志的数据包，代表握手结束。
>
> 若中断，则重复顺序三次握手。



![import3](D:\MyDocument\Development_study\development_note\前端\import3.png)



### 什么是HTTP的事务（HTTP的工作流程）
一次HTTP操作称为一个事务，其工作过程可分为四步：
1. 首先客户机与服务器需要建立连接。只要单击某个超级链接，HTTP的工作开始。
2. 建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是MIME信息包括请求修饰符、客户机信息和可能的内容。
3. 服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后边是MIME信息包括服务器信息、实体信息和可能的内容。
4. 客户端接收服务器所返回的信息通过浏览器显示在用户的显示屏上，然后客户机与服务器断开连接。

如果在以上过程中的某一步出现错误，那么产生错误的信息将返回到客户端，有显示屏输出。对于用户来说，这些过程是由HTTP自己完成的，用户只要用鼠标点击，等待信息显示就可以了。
>注意：
HTTP协议永远都是客户端发起请求，服务器回送响应。
这样就限制了使用HTTP协议，无法实现在客户端没有发起请求的时候，服务器将消息推送给客户端。
HTTP协议是一个无状态的协议，同一个客户端的这次请求和上次请求是没有对应关系。



### URI和URL

**统一资源标识符**（URI， 英语Uniform Resource Indentifier缩写），RFC定义URI就是由某个协议方案表示的资源的定位标识符。

- Uniform
- Resource
- Indentifier





**统一资源定位符**（URL，英语Uniform Resource Locator的缩写）也被称为网页地址，是因特网上标准的资源的地址。
第一部分和第二部分是不可缺少的，第三部分有时可以省略。**
*现在几乎所有的URI都是URL*。URL的格式由下列三部分组成：

- 第一部分是协议（或称为服务方式），第一部分和第二部分之间用“：//”符号隔开；
- 第二部分是存有该资源的主机IP地址（有时也包括端口号），第二部分和第三部分用“/”符号隔开；
- 第三部分是主机资源的具体地址，如目录和文件名等。



### HTTP协议的特点
HTTP协议的主要特点可概括如下：
1. 支持客户/服务器模式。
2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。
3. 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。
4. 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
5. 无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。


### HTTP协议中对Request-URI指定的资源的不同操作方式，具体介绍如下：
>HTTP Request Method共计15种

1. `GET`         向特定的资源发出请求。

2. `HEAD`        向服务器索要与GET请求相一致的响应，只不过响应体将不会被返回。这一方法可以在不必传输整个响应内容的情况下，就可以获取包含在响应消息头中的元信息。

3. `POST`        向指定资源提交数据进行处理请求（例如提交表单或上传文件），数据被包含在请求实体中。post请求可能会导致新的资源的建立或已有资源的更改。

4. `PUT`         从客户端向服务器传送的数据取代指定的文档的内容。向指定资源位置上传其最新内容。

5. `DELETE`      请求服务器删除指定的页面。请求服务器删除Request-URI所标识的资源。

6. `CONNECT`     HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。

7. `OPTIONS`     返回服务器针对特定资源所支持的HTTP请求方法。也可以利用向Web服务器发送`*`的请求来测试服务器的功能性。

8. `TRACE`       回显服务器收到的请求，主要用于测试或诊断。

9. `PATCH`       实体中包含一个表，表中说明与该URI所表示的原内容的区别。

10. `MOVE`       请求服务器将指定的页面移至另一个网络地址。

11. `COPY`       请求服务器将指定的页面拷贝至另一个网络地址。

12. `LINK`       请求服务器建立链接关系。

13. `UNLINK`     请求服务器建立链接关系。

14. `WRAPPED`    允许客户端发送经过封装的请求。

15. `Extension-method`   在不改动协议的前提下，可增加另外的方法。



### 当服务器响应时，其状态行的信息为HTTP的版本号，状态码，及解释状态码的简单说明。现将5类状态码详细列出：
1. ① 客户方错误
100　 继续
101　 交换协议
2. ② 成功
200 　OK：    客户端请求成功
201 　已创建
202　 接收
203　 非认证信息
204　 无内容
205 　重置内容
206　 部分内容
3. ③ 重定向
300 　多路选择
301　 永久转移
302　 暂时转移
303　 参见其它
304 　未修改（Not Modified）
305　 使用代理
4. ④ 客户方错误
400　 错误请求（Bad Request）：    客户端请求有语法错误，不能被服务器所理解
401 　未认证：    请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用
402 　需要付费
403　 禁止（Forbidden）：    服务器收到请求，但是拒绝提供服务
404　 未找到（Not Found）
405　 方法不允许
406　 不接受
407　 需要代理认证
408　 请求超时
409　 冲突
410 　失败
411 　需要长度
412　 条件失败
413 　请求实体太大
414 　请求URI太长
415 　不支持媒体类型
5. ⑤ 服务器错误
500　 服务器内部错误（Internal Server Error）：    服务器发生不可预期的错误
501　 未实现（Not Implemented）
502　 网关失败
503　 （Server Unavailable）：    服务器当前不能处理客户端的请求，一段时间后可能恢复正常
504 　网关超时
505 HTTP版本不支持
